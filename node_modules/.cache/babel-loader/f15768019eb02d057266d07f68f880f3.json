{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Roan\\\\Documents\\\\GitHub\\\\OnTimeReactFrontEnd\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Roan\\\\Documents\\\\GitHub\\\\OnTimeReactFrontEnd\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport config from './firebaseServiceConfig';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\n\nvar firebaseService =\n/*#__PURE__*/\nfunction () {\n  function firebaseService() {\n    var _this = this;\n\n    _classCallCheck(this, firebaseService);\n\n    this.getUserData = function (userId) {\n      if (!firebase.apps.length) {\n        return;\n      }\n\n      return new Promise(function (resolve, reject) {\n        _this.db.ref(\"users/\".concat(userId)).once('value').then(function (snapshot) {\n          var user = snapshot.val();\n          resolve(user);\n        });\n      });\n    };\n\n    this.updateUserData = function (user) {\n      if (!firebase.apps.length) {\n        return;\n      }\n\n      return _this.db.ref(\"users/\".concat(user.uid)).set(user);\n    };\n\n    this.onAuthStateChanged = function (callback) {\n      if (!_this.auth) {\n        return;\n      }\n\n      _this.auth.onAuthStateChanged(callback);\n    };\n\n    this.signOut = function () {\n      if (!_this.auth) {\n        return;\n      }\n\n      _this.auth.signOut();\n    };\n  }\n\n  _createClass(firebaseService, [{\n    key: \"init\",\n    value: function init(success) {\n      if (Object.entries(config).length === 0 && config.constructor === Object) {\n        if (process.env.NODE_ENV === 'development') {\n          console.warn(\"Missing Firebase Configuration at src/app/services/firebaseService/firebaseServiceConfig.js\");\n        }\n\n        success(false);\n        return;\n      }\n\n      if (firebase.apps.length) {\n        return;\n      }\n\n      firebase.initializeApp(config);\n      this.db = firebase.database();\n      this.auth = firebase.auth();\n      success(true);\n    }\n  }]);\n\n  return firebaseService;\n}();\n\nvar instance = new firebaseService();\nexport default instance;","map":{"version":3,"sources":["C:\\Users\\Roan\\Documents\\GitHub\\OnTimeReactFrontEnd\\src\\app\\services\\firebaseService\\firebaseService.js"],"names":["config","firebase","firebaseService","getUserData","userId","apps","length","Promise","resolve","reject","db","ref","once","then","snapshot","user","val","updateUserData","uid","set","onAuthStateChanged","callback","auth","signOut","success","Object","entries","constructor","process","env","NODE_ENV","console","warn","initializeApp","database","instance"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,yBAAnB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAO,mBAAP;;IAEMC,e;;;;;;;;SAwBFC,W,GAAc,UAACC,MAAD,EAAY;AACtB,UAAK,CAACH,QAAQ,CAACI,IAAT,CAAcC,MAApB,EACA;AACI;AACH;;AACD,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,QAAA,KAAI,CAACC,EAAL,CAAQC,GAAR,iBAAqBP,MAArB,GACKQ,IADL,CACU,OADV,EAEKC,IAFL,CAEU,UAACC,QAAD,EAAc;AAChB,cAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAT,EAAb;AACAR,UAAAA,OAAO,CAACO,IAAD,CAAP;AACH,SALL;AAMH,OAPM,CAAP;AAQH,K;;SAEDE,c,GAAiB,UAACF,IAAD,EAAU;AACvB,UAAK,CAACd,QAAQ,CAACI,IAAT,CAAcC,MAApB,EACA;AACI;AACH;;AACD,aAAO,KAAI,CAACI,EAAL,CAAQC,GAAR,iBAAqBI,IAAI,CAACG,GAA1B,GACFC,GADE,CACEJ,IADF,CAAP;AAEH,K;;SAEDK,kB,GAAqB,UAACC,QAAD,EAAc;AAC/B,UAAK,CAAC,KAAI,CAACC,IAAX,EACA;AACI;AACH;;AACD,MAAA,KAAI,CAACA,IAAL,CAAUF,kBAAV,CAA6BC,QAA7B;AACH,K;;SAEDE,O,GAAU,YAAM;AACZ,UAAK,CAAC,KAAI,CAACD,IAAX,EACA;AACI;AACH;;AACD,MAAA,KAAI,CAACA,IAAL,CAAUC,OAAV;AACH,K;;;;;yBA5DIC,O,EACL;AACI,UAAKC,MAAM,CAACC,OAAP,CAAe1B,MAAf,EAAuBM,MAAvB,KAAkC,CAAlC,IAAuCN,MAAM,CAAC2B,WAAP,KAAuBF,MAAnE,EACA;AACI,YAAKG,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA9B,EACA;AACIC,UAAAA,OAAO,CAACC,IAAR,CAAa,6FAAb;AACH;;AACDR,QAAAA,OAAO,CAAC,KAAD,CAAP;AACA;AACH;;AAED,UAAKvB,QAAQ,CAACI,IAAT,CAAcC,MAAnB,EACA;AACI;AACH;;AACDL,MAAAA,QAAQ,CAACgC,aAAT,CAAuBjC,MAAvB;AACA,WAAKU,EAAL,GAAUT,QAAQ,CAACiC,QAAT,EAAV;AACA,WAAKZ,IAAL,GAAYrB,QAAQ,CAACqB,IAAT,EAAZ;AACAE,MAAAA,OAAO,CAAC,IAAD,CAAP;AACH;;;;;;AA2CL,IAAMW,QAAQ,GAAG,IAAIjC,eAAJ,EAAjB;AAEA,eAAeiC,QAAf","sourcesContent":["import config from './firebaseServiceConfig';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\n\r\nclass firebaseService {\r\n\r\n    init(success)\r\n    {\r\n        if ( Object.entries(config).length === 0 && config.constructor === Object )\r\n        {\r\n            if ( process.env.NODE_ENV === 'development' )\r\n            {\r\n                console.warn(\"Missing Firebase Configuration at src/app/services/firebaseService/firebaseServiceConfig.js\");\r\n            }\r\n            success(false);\r\n            return;\r\n        }\r\n\r\n        if ( firebase.apps.length )\r\n        {\r\n            return;\r\n        }\r\n        firebase.initializeApp(config);\r\n        this.db = firebase.database();\r\n        this.auth = firebase.auth();\r\n        success(true);\r\n    }\r\n\r\n    getUserData = (userId) => {\r\n        if ( !firebase.apps.length )\r\n        {\r\n            return;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            this.db.ref(`users/${userId}`)\r\n                .once('value')\r\n                .then((snapshot) => {\r\n                    const user = snapshot.val();\r\n                    resolve(user);\r\n                });\r\n        });\r\n    };\r\n\r\n    updateUserData = (user) => {\r\n        if ( !firebase.apps.length )\r\n        {\r\n            return;\r\n        }\r\n        return this.db.ref(`users/${user.uid}`)\r\n            .set(user);\r\n    };\r\n\r\n    onAuthStateChanged = (callback) => {\r\n        if ( !this.auth )\r\n        {\r\n            return;\r\n        }\r\n        this.auth.onAuthStateChanged(callback);\r\n    };\r\n\r\n    signOut = () => {\r\n        if ( !this.auth )\r\n        {\r\n            return;\r\n        }\r\n        this.auth.signOut();\r\n    }\r\n}\r\n\r\nconst instance = new firebaseService();\r\n\r\nexport default instance;\r\n"]},"metadata":{},"sourceType":"module"}