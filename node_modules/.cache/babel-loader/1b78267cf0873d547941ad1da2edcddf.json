{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Roan\\\\Documents\\\\GitHub\\\\OnTimeReactFrontEnd\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Roan\\\\Documents\\\\GitHub\\\\OnTimeReactFrontEnd\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"C:\\\\Users\\\\Roan\\\\Documents\\\\GitHub\\\\OnTimeReactFrontEnd\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createMuiTheme } from '@material-ui/core';\nimport * as Actions from 'app/store/actions/fuse';\nimport FuseLayoutConfigs from 'app/fuse-layouts/FuseLayoutConfigs';\nimport FuseSettingsConfig from 'app/fuse-configs/settingsConfig';\nimport FuseThemesConfig from 'app/fuse-configs/themesConfig';\nimport _ from '@lodash';\nimport { defaultSettings, getParsedQuerySettings, defaultThemes, defaultThemeOptions, mustHaveThemeOptions, extendThemeWithMixins, mainThemeVariations } from '@fuse/FuseDefaultSettings';\nvar initialSettings = getInitialSettings();\nvar initialThemes = getInitialThemes();\n\nvar initialState = _objectSpread({\n  initial: initialSettings,\n  defaults: _.merge({}, initialSettings),\n  current: _.merge({}, initialSettings),\n  themes: initialThemes\n}, getThemeOptions(initialThemes, initialSettings));\n\nvar settings = function settings() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case Actions.SET_SETTINGS:\n      {\n        var current = generateSettings(state.defaults, action.value);\n        var themes = current.theme.main !== state.current.theme.main ? _objectSpread({}, state.themes, {}, updateMainThemeVariations(current.theme.main)) : state.themes;\n        return _objectSpread({}, state, {\n          current: current,\n          themes: themes\n        }, getThemeOptions(themes, current));\n      }\n\n    case Actions.SET_INITIAL_SETTINGS:\n      {\n        return _.merge({}, initialState);\n      }\n\n    case Actions.SET_DEFAULT_SETTINGS:\n      {\n        var defaults = generateSettings(state.defaults, action.value);\n\n        var _themes = defaults.theme.main !== state.defaults.theme.main ? _objectSpread({}, state.themes, {}, updateMainThemeVariations(defaults.theme.main)) : state.themes;\n\n        return _objectSpread({}, state, {\n          defaults: _.merge({}, defaults),\n          current: _.merge({}, defaults),\n          themes: _themes\n        }, getThemeOptions(_themes, defaults));\n      }\n\n    case Actions.RESET_DEFAULT_SETTINGS:\n      {\n        var _themes2 = _objectSpread({}, state.themes, {}, updateMainThemeVariations(state.defaults.theme.main));\n\n        return _objectSpread({}, state, {\n          defaults: _.merge({}, state.defaults),\n          current: _.merge({}, state.defaults),\n          themes: _themes2\n        }, getThemeOptions(_themes2, state.defaults));\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n};\n\nexport default settings;\n/**\r\n * SETTINGS\r\n */\n\nfunction getInitialSettings() {\n  var defaultLayoutStyle = FuseSettingsConfig.layout && FuseSettingsConfig.layout.style ? FuseSettingsConfig.layout.style : \"layout1\";\n  var layout = {\n    style: defaultLayoutStyle,\n    config: FuseLayoutConfigs[defaultLayoutStyle].defaults\n  };\n  return _.merge({}, defaultSettings, {\n    layout: layout\n  }, FuseSettingsConfig, getParsedQuerySettings());\n}\n/**\r\n * THEMES\r\n */\n\n\nfunction getInitialThemes() {\n  var themesObj = Object.keys(FuseThemesConfig).length !== 0 ? FuseThemesConfig : defaultThemes;\n  var themes = Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(themesObj).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        value = _ref2[1];\n\n    var muiTheme = _.merge({}, defaultThemeOptions, value, mustHaveThemeOptions);\n\n    return _defineProperty({}, key, createMuiTheme(_.merge({}, muiTheme, {\n      mixins: extendThemeWithMixins(muiTheme)\n    })));\n  }))));\n  return _objectSpread({}, themes, {}, mainThemeVariations(themesObj[initialSettings.theme.main]));\n}\n\nfunction updateMainThemeVariations(mainTheme) {\n  var themesObj = Object.keys(FuseThemesConfig).length !== 0 ? FuseThemesConfig : defaultThemes;\n  return mainThemeVariations(themesObj[mainTheme]);\n}\n\nfunction getThemeOptions(themes, settings) {\n  return _objectSpread({\n    mainTheme: themes[settings.theme.main],\n    navbarTheme: themes[settings.theme.navbar],\n    toolbarTheme: themes[settings.theme.toolbar],\n    footerTheme: themes[settings.theme.footer]\n  }, updateMainThemeVariations(settings.theme.main));\n}\n\nexport function generateSettings(defaultSettings, newSettings) {\n  return _.merge({}, defaultSettings, newSettings && newSettings.layout && newSettings.layout.style ? {\n    layout: {\n      config: FuseLayoutConfigs[newSettings.layout.style].defaults\n    }\n  } : {}, newSettings);\n}","map":{"version":3,"sources":["C:\\Users\\Roan\\Documents\\GitHub\\OnTimeReactFrontEnd\\src\\app\\store\\reducers\\fuse\\settings.reducer.js"],"names":["createMuiTheme","Actions","FuseLayoutConfigs","FuseSettingsConfig","FuseThemesConfig","_","defaultSettings","getParsedQuerySettings","defaultThemes","defaultThemeOptions","mustHaveThemeOptions","extendThemeWithMixins","mainThemeVariations","initialSettings","getInitialSettings","initialThemes","getInitialThemes","initialState","initial","defaults","merge","current","themes","getThemeOptions","settings","state","action","type","SET_SETTINGS","generateSettings","value","theme","main","updateMainThemeVariations","SET_INITIAL_SETTINGS","SET_DEFAULT_SETTINGS","RESET_DEFAULT_SETTINGS","defaultLayoutStyle","layout","style","config","themesObj","Object","keys","length","assign","entries","map","key","muiTheme","mixins","mainTheme","navbarTheme","navbar","toolbarTheme","toolbar","footerTheme","footer","newSettings"],"mappings":"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","sourcesContent":["import {createMuiTheme} from '@material-ui/core';\r\nimport * as Actions from 'app/store/actions/fuse';\r\nimport FuseLayoutConfigs from 'app/fuse-layouts/FuseLayoutConfigs';\r\nimport FuseSettingsConfig from 'app/fuse-configs/settingsConfig';\r\nimport FuseThemesConfig from 'app/fuse-configs/themesConfig';\r\nimport _ from '@lodash';\r\nimport {\r\n    defaultSettings,\r\n    getParsedQuerySettings,\r\n    defaultThemes,\r\n    defaultThemeOptions,\r\n    mustHaveThemeOptions,\r\n    extendThemeWithMixins,\r\n    mainThemeVariations\r\n} from '@fuse/FuseDefaultSettings';\r\n\r\nconst initialSettings = getInitialSettings();\r\nconst initialThemes = getInitialThemes();\r\n\r\nconst initialState = {\r\n    initial : initialSettings,\r\n    defaults: _.merge({}, initialSettings),\r\n    current : _.merge({}, initialSettings),\r\n    themes  : initialThemes,\r\n    ...getThemeOptions(initialThemes, initialSettings)\r\n};\r\n\r\nconst settings = function (state = initialState, action) {\r\n    switch ( action.type )\r\n    {\r\n        case Actions.SET_SETTINGS:\r\n        {\r\n            const current = generateSettings(state.defaults, action.value);\r\n            const themes = current.theme.main !== state.current.theme.main ? {...state.themes, ...updateMainThemeVariations(current.theme.main)} : state.themes;\r\n            return {\r\n                ...state,\r\n                current,\r\n                themes,\r\n                ...getThemeOptions(themes, current)\r\n            };\r\n        }\r\n        case Actions.SET_INITIAL_SETTINGS:\r\n        {\r\n            return _.merge({}, initialState);\r\n        }\r\n        case Actions.SET_DEFAULT_SETTINGS:\r\n        {\r\n            const defaults = generateSettings(state.defaults, action.value);\r\n            const themes = defaults.theme.main !== state.defaults.theme.main ? {...state.themes, ...updateMainThemeVariations(defaults.theme.main)} : state.themes;\r\n            return {\r\n                ...state,\r\n                defaults: _.merge({}, defaults),\r\n                current : _.merge({}, defaults),\r\n                themes,\r\n                ...getThemeOptions(themes, defaults)\r\n            };\r\n        }\r\n        case Actions.RESET_DEFAULT_SETTINGS:\r\n        {\r\n            const themes = {...state.themes, ...updateMainThemeVariations(state.defaults.theme.main)};\r\n            return {\r\n                ...state,\r\n                defaults: _.merge({}, state.defaults),\r\n                current : _.merge({}, state.defaults),\r\n                themes,\r\n                ...getThemeOptions(themes, state.defaults)\r\n            };\r\n        }\r\n        default:\r\n        {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default settings;\r\n\r\n/**\r\n * SETTINGS\r\n */\r\nfunction getInitialSettings()\r\n{\r\n    const defaultLayoutStyle = (FuseSettingsConfig.layout && FuseSettingsConfig.layout.style) ? FuseSettingsConfig.layout.style : \"layout1\";\r\n    const layout = {\r\n        style : defaultLayoutStyle,\r\n        config: FuseLayoutConfigs[defaultLayoutStyle].defaults\r\n    };\r\n    return _.merge({}, defaultSettings, {layout}, FuseSettingsConfig, getParsedQuerySettings());\r\n}\r\n\r\n/**\r\n * THEMES\r\n */\r\nfunction getInitialThemes()\r\n{\r\n    const themesObj = Object.keys(FuseThemesConfig).length !== 0 ? FuseThemesConfig : defaultThemes;\r\n\r\n    const themes = Object.assign({}, ...Object.entries(themesObj).map(([key, value]) => {\r\n            const muiTheme = _.merge({}, defaultThemeOptions, value, mustHaveThemeOptions);\r\n            return {\r\n                [key]: createMuiTheme(_.merge({}, muiTheme, {mixins: extendThemeWithMixins(muiTheme)}))\r\n            }\r\n        }\r\n    ));\r\n\r\n    return {\r\n        ...themes,\r\n        ...mainThemeVariations(themesObj[initialSettings.theme.main])\r\n    }\r\n}\r\n\r\nfunction updateMainThemeVariations(mainTheme)\r\n{\r\n    const themesObj = Object.keys(FuseThemesConfig).length !== 0 ? FuseThemesConfig : defaultThemes;\r\n    return mainThemeVariations(themesObj[mainTheme])\r\n}\r\n\r\nfunction getThemeOptions(themes, settings)\r\n{\r\n    return {\r\n        mainTheme   : themes[settings.theme.main],\r\n        navbarTheme : themes[settings.theme.navbar],\r\n        toolbarTheme: themes[settings.theme.toolbar],\r\n        footerTheme : themes[settings.theme.footer],\r\n        ...updateMainThemeVariations(settings.theme.main)\r\n    }\r\n}\r\n\r\nexport function generateSettings(defaultSettings, newSettings)\r\n{\r\n    return _.merge({}, defaultSettings, newSettings && newSettings.layout && newSettings.layout.style ? {layout: {config: FuseLayoutConfigs[newSettings.layout.style].defaults}} : {}, newSettings);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}